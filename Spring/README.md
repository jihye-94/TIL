# Spring   

# 스프링 용어, 개념 관련 정리

## 스프링 

- 자바 엔터프라이즈 개발을 위한 오픈소스 애플리케이션 프레임워크
- 자바를 이용한 동적인 웹 사이트를 개발하기 위해 
 여러 추상화 서비스를 제공하는 애플리케이션 프레임워크
###사용 이유
- 방대한 문서량
- 개발 편의성, 생산성이 뛰어남
  - 애플리케이션 레벨에서의 인프라를 갖추고있어 개발자는 비즈니스 로직에만 집중하면 된다.
- 엔터프라이즈 프레임워크(대용량 트래픽 처리 검증된)
  - spring batch나 spring security등과 같이 다양한 하위 프로젝트들을 제공
- 성능향상: 싱글톤 레지스트리 사용
  - 일반적 자바 싱글톤의 장점을 취하고 단점을 배제한 싱글톤 레지스트리 사용 
    - 일반적 자바 싱글톤   
    장점 : 서버 관점에서 매 요청마다 새로운 객체를 생성하지 않아도 되어 성능상 이점    
    단점 : ```Private``` 생성자 사용으로 상속 불가, 테스트 어려움, 객체지향적 사용 어려움
- 테스트
  - DI를 통한 테스트 객체 주입으로 테스트가 용이

### 스프링의 핵심 원칙 
  : **DI/IoC, AOP, PSA**

- **IoC (Inversion Of Control)**
  - **제어의 역전**(능동 -> 수동)
  - 객체의 생성과 생명주기 관리까지 모든 객체의 제어권을 프레임워크가 가진다.
  - 객체지향에선 DI를 통해 IoC를 구현한다.


- **DI (Dependency Injection)** 
  - **의존성 주입**
  - 하나의 객체가 다른 객체의 상태에 따라 영향을 받는 것
  - 의존관계는 개발자가 아닌 스프링 컨테이너에서 관리하며 
의존관계가 필요할 때마다 스프링 컨테이너에서 개발자 코드 안으로 의존성 주입
  - DI는 IoC개념이 적용된 결과물 중 하나이며 IoC는 DI를 포함하는 개념이다.


- **AOP(Aspect-Oriented Programming)**
  - **관점지향 프로그래밍** 
  - DI : 의존성 주입 , AOP : 로직(code)주입 
  - 관점지향이란 쉽게 어떤 로직을 핵심적인 관점, 부가적 관점으로 나눠보며 
그 관점 기준으로 각각 모듈화 하겠다는 것.
    - 핵심적 관점 : 비즈니스로직
    - 부가적 관점 : 핵심 로직 실행을 위해 행해지는 로깅, 트랜잭션, 캐싱 등 (재사용됨)
  - 반복되는 코드를 Aspect로 모듈화하고 핵심적인 비즈니스 로직에서 분리해서 재사용하는 취지


- **PSA(Portable Service Abstraction)**
  - **일관성 있는 서비스 추상화**
  - 서비스 추상화: 같은 일을 하는 다수의 기술을 공통의 인터페이스로 제어할 수 있게 하는 것 
  - 외부 환경 변화와 관계없이 일관된 방식으로 기술에 접근할 수 있게 해주는 것

###POJO
- 오래된 방식의 자바 오브젝트의 줄임말
- 특정 자바 모델, 기능, 프레임워크 등에 의존하지 않는 자바 오브젝트 
- 객체지향적인 원리에 충실하면서, 환경과 기술에 종속되지 않고 필요에 따라 재활용될 수 있는 방식으로 설계된 오브젝트
- 자바를 이용한 테스트에 용이하다.

###의존관계 주입
- **생성자 주입**
- **수정자 주입**(setter)
- **일반 메서드 주입** 
- **필드 주입**

**생성자 주입을 추천하는 이유**
- **불변**
  - 불변을 보장함으로써 추후 발생 가능한 버그를 사전 예방
  - 의존관계는 주입 이후 애플리케이션 종료시점까지 변경하지 않는 것이 좋음
- **스프링에 비의존**
  - 스프링 application context가 없어도 단독으로 테스트 혹은 도메인으로써의 역할을 수행가능
- **누락**
  - 데이터 주입 누락시 컴파일 오류 발생
- **final 키워드 사용 가능**
  - ```final``` 키워드 사용함으로써 생성자 값이 설정되지 않을 경우 컴파일 오류
  
**필드 주입을 비추천하는 이유**    

- 스프링에 의존적인 코드가 됨 
- 스프링 application context가 없으면 테스트 불가
- 스프링 설정을 목적으로 하는 ```@Configuration``` 같은 곳에서만 특별한 용도로 사용

###Bean
- 스프링 IoC Container에 의해 생성 및 관리되는 자바 객체
- **Java Bean**
  - 데이터 표현하는 것을 목적으로 하는 자바 클래스
  - 다섯가지 규약에 맞춰 생성한 클래스
    - 기본 생성자가 존재
    - 모든 멤버변수의 접근제어자는 ```private```
    - 모든 멤버변수에 getter/setter 존재
    - 외부에서의 접근은 메서드로만 가능
    - 직렬화가 가능
- **Spring Bean**
  - Spring Framework의 IoC Container에 의해 등록, 생성, 조회, 관계설정이 되는 객체
- **Bean Scope**
  - 빈의 생명주기와 관련이 있다.
  - **singleton**: 하나의 Bean 정의에 대해서 스프링 IoC 컨테이너마다 단 하나의 객체만 존재
  - **prototype**: 하나의 Bean 정의에 대해서 매 Bean을 찾는 요청마다 새로운 Bean을 생성. (Ioc 컨테이너가 생명주기 관리를 아예 하지 않는다. 그저 팩토리 메서드)
  - **request**: 하나의 Bean 정의에 대해서 하나의 HTTP Request의 생명주기 안에 단 하나의 객체만 존재. (각각의 요청마다 자신만의 객체를 가진다.)
  - **session**: 하나의 Bean 정의에 대해서 하나의 HTTP Session의 생명주기 안에 단 하나의 객체만 존재.
  - **global session**: 하나의 Bean 정의에 대해서 하나의 global HTTP Session의 생명주기 안에 단 하나의 객체만 존재































